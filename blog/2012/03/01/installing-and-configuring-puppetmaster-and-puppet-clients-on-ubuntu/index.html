
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Installing and configuring Puppetmaster and Puppet Clients (On Ubuntu) - reg88.com</title>
  <meta name="author" content="Mike Moghadas">

  
  <meta name="description" content="Puppet is a great Client/Server automation tool for your *NIX environment. The tool can be used to automate: Installations
Updates
Deployment
Service &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://mmoghadas.github.io/blog/2012/03/01/installing-and-configuring-puppetmaster-and-puppet-clients-on-ubuntu/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="reg88.com" type="application/atom+xml">
  <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <div id="logo">
  	<div id="logoLeft">{</div>
  	<div id="logoText">mike.moghadas</div>
  	<div id="logoRight">}</div>
  	<div class="clear"></div>
  </div>
  <h1><a href="/">reg88.com</a></h1>
  
    <h2>fine...I&#039;ll blog too</h2>
  
  <div class="clear"></div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:mmoghadas.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      
        <h1 class="entry-title">Installing and Configuring Puppetmaster and Puppet Clients (on Ubuntu)</h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2012-03-01T00:00:00-08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Puppet is a great Client/Server automation tool for your *NIX environment. The tool can be used to automate:</p>

<p>Installations<br/>
Updates<br/>
Deployment<br/>
Service manipulation<br/>
etc&#8230;</p>

<p>NOTE: Typically, the client(puppet/node) retrieves updates from the server (Puppetmaster). However you can enable push from the server to client as well. See &#8220;Client Configuration&#8221;.</p>

<p>Follow the below steps to get a basic configuration going.</p>

<!--more-->


<p><strong>Installation: Server</strong></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">puppetmaster</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Installation: Client</strong></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">puppet</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Note: </strong><em>Although not required, you may want to make sure you have the same version of Puppet and Puppetmaster. I have Puppet 2.6.3 and Puppetmaster 2.7.1 running sucessfully, but have had issues with previous versions and installations.</em></p>

<p>If you like to install the same exact version of client/server you have some options:<br/>
1. Install via Ruby</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">build</span><span class="o">-</span><span class="n">essential</span> <span class="n">zlib1g</span> <span class="n">zlib1g</span><span class="o">-</span><span class="n">dev</span> <span class="n">libxml2</span> <span class="n">libxml2</span><span class="o">-</span><span class="n">dev</span> <span class="n">curl</span> <span class="n">wget</span> <span class="n">openssl</span> <span class="n">libssl</span><span class="o">-</span><span class="n">dev</span> <span class="n">libopenssl</span><span class="o">-</span><span class="n">ruby</span>
</span><span class='line'><span class="n">mkdir</span> <span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">installs</span>
</span><span class='line'><span class="n">cd</span> <span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">installs</span>
</span><span class='line'><span class="n">wget</span> <span class="n">http</span><span class="o">:</span><span class="c1">//ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.2-p180.tar.gz  </span>
</span><span class='line'><span class="n">tar</span> <span class="n">zxvf</span> <span class="n">ruby</span><span class="o">-</span><span class="mf">1.9.2</span><span class="o">-</span><span class="n">p180</span><span class="p">.</span><span class="n">tar</span><span class="p">.</span><span class="n">gz</span>
</span><span class='line'><span class="n">cd</span> <span class="n">ruby</span><span class="o">-</span><span class="mf">1.9.2</span><span class="o">-</span><span class="n">p180</span>
</span><span class='line'><span class="p">.</span><span class="o">/</span><span class="n">configure</span>
</span><span class='line'><span class="n">make</span>
</span><span class='line'><span class="n">make</span> <span class="n">install</span>
</span><span class='line'><span class="n">gem</span> <span class="n">update</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8211</span><span class="p">;</span><span class="n">system</span>
</span><span class='line'>
</span><span class='line'><span class="n">gem</span> <span class="n">install</span> <span class="n">facter</span>
</span><span class='line'><span class="n">gem</span> <span class="n">install</span> <span class="n">puppet</span>
</span></code></pre></td></tr></table></div></figure>


<ol>
<li>Install from source (Assuming you have ruby installed)</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">wget</span> <span class="n">http</span><span class="o">:</span><span class="c1">//puppetlabs.com/downloads/facter/facter-latest.tgz  </span>
</span><span class='line'><span class="n">gzip</span> <span class="o">-</span><span class="n">d</span> <span class="o">-</span><span class="n">c</span> <span class="n">facter</span><span class="o">-</span><span class="n">latest</span><span class="p">.</span><span class="n">tgz</span> <span class="o">|</span> <span class="n">tar</span> <span class="n">xf</span> <span class="o">-</span>
</span><span class='line'><span class="n">cd</span> <span class="n">facter</span><span class="o">-*</span>
</span><span class='line'><span class="n">ruby</span> <span class="n">install</span><span class="p">.</span><span class="n">rb</span>
</span><span class='line'>
</span><span class='line'><span class="n">wget</span> <span class="n">http</span><span class="o">:</span><span class="c1">//puppetlabs.com/downloads/puppet/puppet-latest.tgz  </span>
</span><span class='line'><span class="n">gzip</span> <span class="o">-</span><span class="n">d</span> <span class="o">-</span><span class="n">c</span> <span class="n">puppet</span><span class="o">-</span><span class="n">latest</span><span class="p">.</span><span class="n">tgz</span> <span class="o">|</span> <span class="n">tar</span> <span class="n">xf</span> <span class="o">-</span>
</span><span class='line'><span class="n">ruby</span> <span class="n">install</span><span class="p">.</span><span class="n">rb</span>
</span></code></pre></td></tr></table></div></figure>


<ol>
<li>Another way to install</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">ruby</span> <span class="n">rubygems</span> <span class="n">libopenssl</span><span class="o">-</span><span class="n">ruby</span>
</span><span class='line'><span class="n">export</span> <span class="n">RUBYOPT</span><span class="o">=</span><span class="n">rubygems</span>
</span><span class='line'><span class="n">gem</span> <span class="n">install</span> <span class="n">facter</span> <span class="n">puppet</span>
</span></code></pre></td></tr></table></div></figure>


<ol>
<li>Install form 3rd Party repository</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">python</span><span class="o">-</span><span class="n">software</span><span class="o">-</span><span class="n">properties</span>
</span><span class='line'><span class="n">add</span><span class="o">-</span><span class="n">apt</span><span class="o">-</span><span class="n">repository</span> <span class="n">ppa</span><span class="o">:</span><span class="n">mathiaz</span><span class="o">/</span><span class="n">puppet</span><span class="o">-</span><span class="n">backports</span>
</span><span class='line'><span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span>
</span><span class='line'><span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">puppetmaster</span>
</span><span class='line'><span class="o">-</span><span class="n">OR</span><span class="o">-</span>
</span><span class='line'><span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">puppet</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Configuration: Server</strong><br/>
Edit the puppet.conf file and add the following lines</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">vi</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">puppet</span><span class="o">/</span><span class="n">puppet</span><span class="p">.</span><span class="n">conf</span>
</span><span class='line'><span class="p">[</span><span class="n">agent</span><span class="p">]</span>
</span><span class='line'><span class="n">classfile</span> <span class="o">=</span> <span class="err">$</span><span class="n">vardir</span><span class="o">/</span><span class="n">classes</span><span class="p">.</span><span class="n">txt</span>
</span><span class='line'><span class="n">localconfig</span> <span class="o">=</span> <span class="err">$</span><span class="n">vardir</span><span class="o">/</span><span class="n">localconfig</span>
</span><span class='line'><span class="n">report</span> <span class="o">=</span> <span class="nb">true</span>
</span><span class='line'>
</span><span class='line'><span class="p">[</span><span class="n">master</span><span class="p">]</span>
</span><span class='line'><span class="n">autosign</span> <span class="o">=</span> <span class="nb">true</span>
</span></code></pre></td></tr></table></div></figure>


<p>Edit the fileserver.conf file and add the following lines</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">vi</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">puppet</span><span class="o">/</span><span class="n">fileserver</span><span class="p">.</span><span class="n">conf</span>
</span><span class='line'>
</span><span class='line'><span class="p">[</span><span class="n">files</span><span class="p">]</span>
</span><span class='line'><span class="n">path</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">puppet</span><span class="o">/</span><span class="n">files</span>
</span><span class='line'><span class="n">allow</span> <span class="mf">10.176.0.0</span><span class="o">/</span><span class="mi">16</span>
</span><span class='line'>
</span><span class='line'><span class="p">[</span><span class="n">plugins</span><span class="p">]</span>
</span><span class='line'><span class="n">allow</span> <span class="mf">10.176.0.0</span><span class="o">/</span><span class="mi">16</span>
</span><span class='line'>
</span><span class='line'><span class="p">[</span><span class="n">modules</span><span class="p">]</span>
</span><span class='line'><span class="n">allow</span> <span class="mf">10.176.0.0</span><span class="o">/</span><span class="mi">16</span>
</span></code></pre></td></tr></table></div></figure>


<p>Create the files directory specified above (required to start the puppetmaster service)</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">mkdir</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">puppet</span><span class="o">/</span><span class="n">files</span>
</span></code></pre></td></tr></table></div></figure>


<p>Configure your nodes (client) below. The templates will apply to these nodes only.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">vi</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">puppet</span><span class="o">/</span><span class="n">manifests</span><span class="o">/</span><span class="n">nodes</span><span class="p">.</span><span class="n">pp</span>
</span><span class='line'>
</span><span class='line'><span class="n">node</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8216</span><span class="p">;</span><span class="n">basenode</span><span class="o">&amp;</span><span class="err">#</span><span class="mi">8217</span><span class="p">;</span> <span class="p">{</span>
</span><span class='line'><span class="n">include</span> <span class="n">baseclass</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">node</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8216</span><span class="p">;</span><span class="n">mobile101</span><span class="p">.</span><span class="n">example</span><span class="p">.</span><span class="n">com</span><span class="o">&amp;</span><span class="err">#</span><span class="mi">8217</span><span class="p">;</span> <span class="n">inherits</span> <span class="n">basenode</span> <span class="p">{</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">node</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8216</span><span class="p">;</span><span class="n">mobile102</span><span class="p">.</span><span class="n">example</span><span class="p">.</span><span class="n">com</span><span class="o">&amp;</span><span class="err">#</span><span class="mi">8217</span><span class="p">;</span> <span class="n">inherits</span> <span class="n">basenode</span> <span class="p">{</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Configure your templates. Here you&#8217;re listing the modules will effect your clients.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">vi</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">puppet</span><span class="o">/</span><span class="n">manifests</span><span class="o">/</span><span class="n">templates</span><span class="p">.</span><span class="n">pp</span>
</span><span class='line'>
</span><span class='line'><span class="n">node</span> <span class="k">default</span> <span class="p">{</span>
</span><span class='line'><span class="n">include</span> <span class="n">baseclass</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">class</span> <span class="n">baseclass</span> <span class="p">{</span>
</span><span class='line'><span class="n">include</span> <span class="n">mobile</span><span class="o">::</span><span class="n">mobile_content</span>
</span><span class='line'><span class="n">include</span> <span class="n">mobile</span><span class="o">::</span><span class="n">mobile_settings</span>
</span><span class='line'><span class="n">include</span> <span class="n">mobile</span><span class="o">::</span><span class="n">mobile</span><span class="err">\</span><span class="n">_wsgi</span><span class="err">\</span><span class="n">_app</span>
</span><span class='line'><span class="n">include</span> <span class="n">mobile</span><span class="o">::</span><span class="n">mobile_django</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Edit the site.pp and import your nodes and templates</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">vi</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">puppet</span><span class="o">/</span><span class="n">manifests</span><span class="o">/</span><span class="n">site</span><span class="p">.</span><span class="n">pp</span>
</span><span class='line'>
</span><span class='line'><span class="n">import</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8220</span><span class="p">;</span><span class="n">nodes</span><span class="o">&amp;</span><span class="err">#</span><span class="mi">8221</span><span class="p">;</span>
</span><span class='line'><span class="n">import</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8220</span><span class="p">;</span><span class="n">templates</span><span class="o">&amp;</span><span class="err">#</span><span class="mi">8221</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="n">filebucket</span> <span class="p">{</span> <span class="n">main</span><span class="o">:</span> <span class="n">server</span> <span class="o">=&gt;</span> <span class="n">puppet</span> <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Restart puppetmaster to enable the above changes</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">init</span><span class="p">.</span><span class="n">d</span><span class="o">/</span><span class="n">puppetmaster</span> <span class="n">restart</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Configuration: Client</strong><br/>
There are only a few steps to get the client up and running. First up is the puppet main configuration file. Edit the file below and make changes.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">vi</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">puppet</span><span class="o">/</span><span class="n">puppet</span><span class="p">.</span><span class="n">conf</span>
</span><span class='line'><span class="err">\#</span> <span class="n">VERY</span> <span class="n">IMPORTANT</span><span class="o">&amp;</span><span class="err">#</span><span class="mi">8230</span><span class="p">;</span> <span class="n">THE</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8220</span><span class="p">;</span><span class="n">SERVER</span><span class="o">&amp;</span><span class="err">#</span><span class="mi">8221</span><span class="p">;</span> <span class="n">VARIABLE</span> <span class="n">MUST</span> <span class="n">BE</span> <span class="n">USING</span> <span class="n">THE</span> <span class="n">HOSTNAME</span> <span class="n">OF</span> <span class="n">THE</span> <span class="n">PUPPETMASTER</span><span class="p">..</span><span class="n">NOT</span> <span class="n">AN</span> <span class="n">ALIAS</span><span class="o">!!</span>
</span><span class='line'>
</span><span class='line'><span class="p">[</span><span class="n">main</span><span class="p">]</span>
</span><span class='line'><span class="n">server</span> <span class="o">=</span> <span class="n">puppetmaster</span><span class="p">.</span><span class="n">example</span><span class="p">.</span><span class="n">com</span>
</span><span class='line'>
</span><span class='line'><span class="cp">#[puppetmasterd]  </span>
</span><span class='line'><span class="cp">#templatedir=/var/lib/puppet/templates</span>
</span><span class='line'>
</span><span class='line'><span class="p">[</span><span class="n">agent</span><span class="p">]</span>
</span><span class='line'><span class="n">report</span> <span class="o">=</span> <span class="nb">true</span>
</span><span class='line'><span class="n">listen</span> <span class="o">=</span> <span class="nb">true</span>
</span><span class='line'><span class="n">runinterval</span> <span class="o">=</span> <span class="mi">3600</span> <span class="err">#</span><span class="mi">1</span> <span class="n">hour</span>
</span></code></pre></td></tr></table></div></figure>


<p>Configure puppet to automatically at boot</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">vi</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="k">default</span><span class="o">/</span><span class="n">puppet</span>
</span><span class='line'><span class="n">START</span><span class="o">=</span><span class="n">yes</span>
</span></code></pre></td></tr></table></div></figure>


<p>Create the following required file</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">touch</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">puppet</span><span class="o">/</span><span class="n">namespaceauth</span><span class="p">.</span><span class="n">conf</span>
</span></code></pre></td></tr></table></div></figure>


<p>Created the following file if you like to push content manually from the server.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">vi</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">puppet</span><span class="o">/</span><span class="n">auth</span><span class="p">.</span><span class="n">conf</span>
</span><span class='line'><span class="n">path</span> <span class="o">/</span><span class="n">run</span>
</span><span class='line'><span class="n">allow</span> <span class="n">puppetmaster</span><span class="p">.</span><span class="n">example</span><span class="p">.</span><span class="n">com</span>
</span></code></pre></td></tr></table></div></figure>


<p>In this example, I&#8217;m using upstart to recycle a service. You&#8217;ll to copy &#8220;upstart.rb&#8221; from the server to client.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">cd</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">ruby</span><span class="o">/</span><span class="mf">1.8</span><span class="o">/</span><span class="n">puppet</span><span class="o">/</span><span class="n">provider</span><span class="o">/</span><span class="n">service</span><span class="o">/</span>
</span><span class='line'><span class="n">scp</span> <span class="n">username</span><span class="p">@</span><span class="n">puppetmaster</span><span class="p">.</span><span class="n">example</span><span class="p">.</span><span class="n">com</span><span class="o">:/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">ruby</span><span class="o">/</span><span class="mf">1.8</span><span class="o">/</span><span class="n">puppet</span><span class="o">/</span><span class="n">provider</span><span class="o">/</span><span class="n">service</span><span class="o">/</span><span class="n">upstart</span><span class="p">.</span><span class="n">rb</span> <span class="p">.</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Configuration: Certificate</strong><br/>
STEP1: On the Client:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">puppetd</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8211</span><span class="p">;</span><span class="n">server</span> <span class="n">puppetmaster</span><span class="p">.</span><span class="n">example</span><span class="p">.</span><span class="n">com</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8211</span><span class="p">;</span><span class="n">waitforcert</span> <span class="mi">60</span>
</span></code></pre></td></tr></table></div></figure>


<p>STEP2: On the Server:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">puppetca</span> <span class="o">-</span><span class="n">la</span>
</span><span class='line'><span class="n">puppetca</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8211</span><span class="p">;</span><span class="n">sign</span> <span class="n">mobile101</span><span class="p">.</span><span class="n">example</span><span class="p">.</span><span class="n">com</span>
</span><span class='line'><span class="n">puppetca</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8211</span><span class="p">;</span><span class="n">sign</span> <span class="n">mobile102</span><span class="p">.</span><span class="n">example</span><span class="p">.</span><span class="n">com</span>
</span></code></pre></td></tr></table></div></figure>


<p>STEP3: On the Client:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">pkill</span> <span class="n">puppet</span>
</span><span class='line'><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">init</span><span class="p">.</span><span class="n">d</span><span class="o">/</span><span class="n">puppet</span> <span class="n">restart</span>
</span></code></pre></td></tr></table></div></figure>


<p>STEP4: Only if necessary: Troubleshooting Certificate Issues:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="cp">#On the server  </span>
</span><span class='line'><span class="n">puppetca</span> <span class="o">-</span><span class="n">r</span> <span class="n">mobile101</span><span class="p">.</span><span class="n">example</span><span class="p">.</span><span class="n">com</span>
</span><span class='line'><span class="n">puppetca</span> <span class="o">-</span><span class="n">c</span> <span class="n">mobile101</span><span class="p">.</span><span class="n">example</span><span class="p">.</span><span class="n">com</span>
</span><span class='line'><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">init</span><span class="p">.</span><span class="n">d</span><span class="o">/</span><span class="n">puppetmaster</span> <span class="n">restart</span>
</span><span class='line'>
</span><span class='line'><span class="cp">#On the client  </span>
</span><span class='line'><span class="n">pkill</span> <span class="n">puppetd</span>
</span><span class='line'><span class="n">rm</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">puppet</span><span class="o">/</span><span class="n">ssl</span><span class="o">/</span> <span class="o">-</span><span class="n">rf</span>
</span></code></pre></td></tr></table></div></figure>


<p>
Repeat the certificate creation process</p>

<p><strong>Configuration: Modules</strong><br/>
At this point there are no configuration left on the client. As long as the certificate was configured properly all changes make beyond this point are all on the server. Lets configure a mobile module we included in the configuration above. Lets start off with the required directory structure.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">mkdir</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">puppet</span><span class="o">/</span><span class="n">files</span>
</span><span class='line'><span class="n">mkdir</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">puppet</span><span class="o">/</span><span class="n">modules</span>
</span><span class='line'><span class="n">mkdir</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">puppet</span><span class="o">/</span><span class="n">modules</span><span class="o">/</span><span class="n">mobile</span><span class="o">/</span>
</span><span class='line'><span class="n">mkdir</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">puppet</span><span class="o">/</span><span class="n">modules</span><span class="o">/</span><span class="n">mobile</span><span class="o">/</span><span class="n">files</span>
</span><span class='line'><span class="n">mkdir</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">puppet</span><span class="o">/</span><span class="n">modules</span><span class="o">/</span><span class="n">mobile</span><span class="o">/</span><span class="n">manifests</span>
</span></code></pre></td></tr></table></div></figure>


<p>The files directory structure is listed below. In this case we&#8217;re assuming you&#8217;re going to be deploying a website named &#8220;mobile&#8221; with it&#8217;s root/content of &#8220;var/www/mobile&#8221;. You can touch these files for this example.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">ls</span> <span class="o">-</span><span class="n">m</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">puppet</span><span class="o">/</span><span class="n">modules</span><span class="o">/</span><span class="n">mobile</span><span class="o">/*</span>
</span><span class='line'><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">puppet</span><span class="o">/</span><span class="n">modules</span><span class="o">/</span><span class="n">mobile</span><span class="o">/</span><span class="n">files</span><span class="o">:</span>
</span><span class='line'><span class="n">mobile</span>
</span><span class='line'>
</span><span class='line'><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">puppet</span><span class="o">/</span><span class="n">modules</span><span class="o">/</span><span class="n">mobile</span><span class="o">/</span><span class="n">manifests</span><span class="o">:</span>
</span><span class='line'><span class="n">config</span><span class="p">.</span><span class="n">pp</span><span class="p">,</span> <span class="n">init</span><span class="p">.</span><span class="n">pp</span><span class="p">,</span> <span class="n">service</span><span class="p">.</span><span class="n">pp</span>
</span></code></pre></td></tr></table></div></figure>


<p>Modify the init.pp file</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">class</span> <span class="n">mobile</span> <span class="p">{</span>
</span><span class='line'><span class="n">include</span> <span class="n">mobile</span><span class="o">::</span><span class="n">config</span><span class="p">,</span> <span class="n">mobile</span><span class="o">::</span><span class="n">service</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Modify the config.pp file</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">class</span> <span class="n">mobile</span><span class="o">::</span><span class="n">config</span> <span class="p">{</span>
</span><span class='line'><span class="n">file</span> <span class="p">{</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8220</span><span class="p">;</span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">mobile</span><span class="o">&amp;</span><span class="err">#</span><span class="mi">8221</span><span class="p">;</span><span class="o">:</span>
</span><span class='line'><span class="n">ensure</span> <span class="o">=&gt;</span> <span class="n">present</span><span class="p">,</span>
</span><span class='line'><span class="n">source</span> <span class="o">=&gt;</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8220</span><span class="p">;</span><span class="n">puppet</span><span class="o">:</span><span class="c1">///modules/mobile/mobile&amp;#8221;,  </span>
</span><span class='line'><span class="n">recurse</span> <span class="o">=&gt;</span> <span class="nb">true</span><span class="p">,</span>
</span><span class='line'><span class="n">group</span> <span class="o">=&gt;</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8220</span><span class="p">;</span><span class="n">www</span><span class="o">-</span><span class="n">data</span><span class="o">&amp;</span><span class="err">#</span><span class="mi">8221</span><span class="p">;,</span>
</span><span class='line'><span class="n">owner</span> <span class="o">=&gt;</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8220</span><span class="p">;</span><span class="n">www</span><span class="o">-</span><span class="n">data</span><span class="o">&amp;</span><span class="err">#</span><span class="mi">8221</span><span class="p">;,</span>
</span><span class='line'><span class="n">mode</span> <span class="o">=&gt;</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8220</span><span class="p">;</span><span class="mo">0644</span><span class="o">&amp;</span><span class="err">#</span><span class="mi">8243</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">file</span> <span class="p">{</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8220</span><span class="p">;</span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">mobile</span><span class="o">/</span><span class="n">MobileTicketSales</span><span class="o">/</span><span class="n">settings</span><span class="p">.</span><span class="n">py</span><span class="o">&amp;</span><span class="err">#</span><span class="mi">8221</span><span class="p">;</span><span class="o">:</span>
</span><span class='line'><span class="n">ensure</span> <span class="o">=&gt;</span> <span class="n">present</span><span class="p">,</span>
</span><span class='line'><span class="n">source</span> <span class="o">=&gt;</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8220</span><span class="p">;</span><span class="n">puppet</span><span class="o">:</span><span class="c1">///modules/mobile/settings.py&amp;#8221;,  </span>
</span><span class='line'><span class="n">recurse</span> <span class="o">=&gt;</span> <span class="nb">true</span><span class="p">,</span>
</span><span class='line'><span class="n">group</span> <span class="o">=&gt;</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8220</span><span class="p">;</span><span class="n">www</span><span class="o">-</span><span class="n">data</span><span class="o">&amp;</span><span class="err">#</span><span class="mi">8221</span><span class="p">;,</span>
</span><span class='line'><span class="n">owner</span> <span class="o">=&gt;</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8220</span><span class="p">;</span><span class="n">www</span><span class="o">-</span><span class="n">data</span><span class="o">&amp;</span><span class="err">#</span><span class="mi">8221</span><span class="p">;,</span>
</span><span class='line'><span class="n">mode</span> <span class="o">=&gt;</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8220</span><span class="p">;</span><span class="mo">0644</span><span class="o">&amp;</span><span class="err">#</span><span class="mi">8243</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">file</span> <span class="p">{</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8220</span><span class="p">;</span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">mobile</span><span class="o">/</span><span class="n">MobileTicketSales</span><span class="o">/</span><span class="n">wsgi_app</span><span class="p">.</span><span class="n">py</span><span class="o">&amp;</span><span class="err">#</span><span class="mi">8221</span><span class="p">;</span><span class="o">:</span>
</span><span class='line'><span class="n">ensure</span> <span class="o">=&gt;</span> <span class="n">present</span><span class="p">,</span>
</span><span class='line'><span class="n">source</span> <span class="o">=&gt;</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8220</span><span class="p">;</span><span class="n">puppet</span><span class="o">:</span><span class="c1">///modules/mobile/wsgi_app.py&amp;#8221;,  </span>
</span><span class='line'><span class="n">recurse</span> <span class="o">=&gt;</span> <span class="nb">true</span><span class="p">,</span>
</span><span class='line'><span class="n">group</span> <span class="o">=&gt;</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8220</span><span class="p">;</span><span class="n">www</span><span class="o">-</span><span class="n">data</span><span class="o">&amp;</span><span class="err">#</span><span class="mi">8221</span><span class="p">;,</span>
</span><span class='line'><span class="n">owner</span> <span class="o">=&gt;</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8220</span><span class="p">;</span><span class="n">www</span><span class="o">-</span><span class="n">data</span><span class="o">&amp;</span><span class="err">#</span><span class="mi">8221</span><span class="p">;,</span>
</span><span class='line'><span class="n">mode</span> <span class="o">=&gt;</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8220</span><span class="p">;</span><span class="mo">0644</span><span class="o">&amp;</span><span class="err">#</span><span class="mi">8243</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">file</span> <span class="p">{</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8220</span><span class="p">;</span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">mobile</span><span class="o">/</span><span class="n">MobileTicketSales</span><span class="o">/</span><span class="n">django</span><span class="p">.</span><span class="n">wsgi</span><span class="o">&amp;</span><span class="err">#</span><span class="mi">8221</span><span class="p">;</span><span class="o">:</span>
</span><span class='line'><span class="n">ensure</span> <span class="o">=&gt;</span> <span class="n">present</span><span class="p">,</span>
</span><span class='line'><span class="n">source</span> <span class="o">=&gt;</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8220</span><span class="p">;</span><span class="n">puppet</span><span class="o">:</span><span class="c1">///modules/mobile/django.wsgi&amp;#8221;,  </span>
</span><span class='line'><span class="n">recurse</span> <span class="o">=&gt;</span> <span class="nb">true</span><span class="p">,</span>
</span><span class='line'><span class="n">group</span> <span class="o">=&gt;</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8220</span><span class="p">;</span><span class="n">www</span><span class="o">-</span><span class="n">data</span><span class="o">&amp;</span><span class="err">#</span><span class="mi">8221</span><span class="p">;,</span>
</span><span class='line'><span class="n">owner</span> <span class="o">=&gt;</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8220</span><span class="p">;</span><span class="n">www</span><span class="o">-</span><span class="n">data</span><span class="o">&amp;</span><span class="err">#</span><span class="mi">8221</span><span class="p">;,</span>
</span><span class='line'><span class="n">mode</span> <span class="o">=&gt;</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8220</span><span class="p">;</span><span class="mo">0644</span><span class="o">&amp;</span><span class="err">#</span><span class="mi">8243</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Modify the service.pp file</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">class</span> <span class="n">mobile</span><span class="o">::</span><span class="n">service</span> <span class="p">{</span>
</span><span class='line'><span class="n">service</span> <span class="p">{</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8220</span><span class="p">;</span><span class="n">mobile</span><span class="o">&amp;</span><span class="err">#</span><span class="mi">8221</span><span class="p">;</span><span class="o">:</span>
</span><span class='line'><span class="n">provider</span> <span class="o">=&gt;</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8220</span><span class="p">;</span><span class="n">upstart</span><span class="o">&amp;</span><span class="err">#</span><span class="mi">8221</span><span class="p">;,</span>
</span><span class='line'><span class="n">ensure</span> <span class="o">=&gt;</span> <span class="n">running</span><span class="p">,</span>
</span><span class='line'><span class="n">hasstatus</span> <span class="o">=&gt;</span> <span class="nb">true</span><span class="p">,</span>
</span><span class='line'><span class="n">hasrestart</span> <span class="o">=&gt;</span> <span class="nb">true</span><span class="p">,</span>
</span><span class='line'><span class="n">enable</span> <span class="o">=&gt;</span> <span class="nb">true</span><span class="p">,</span>
</span><span class='line'><span class="n">subscribe</span> <span class="o">=&gt;</span> <span class="n">File</span><span class="p">[</span><span class="s">&quot;/var/www/mobile/MobileTicketSales/settings.py&quot;</span><span class="p">],</span>
</span><span class='line'><span class="cp">#require =&gt; Class[&quot;mobile::config&quot;],  </span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>That&#8217;s all she wrote. Your clients should retrive any changes hourly (based on configuration above). If you like to push content manually from the server:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">puppetrun</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">8211</span><span class="p">;</span><span class="n">host</span> <span class="n">mobile101</span><span class="p">.</span><span class="n">example</span><span class="p">.</span><span class="n">com</span>
</span></code></pre></td></tr></table></div></figure>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Mike Moghadas</span></span>

      








  


<time datetime="2012-03-01T00:00:00-08:00" pubdate data-updated="true"></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/linux/'>linux</a>, <a class='category' href='/blog/categories/puppet/'>puppet</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://mmoghadas.github.io/blog/2012/03/01/installing-and-configuring-puppetmaster-and-puppet-clients-on-ubuntu/" data-via="" data-counturl="http://mmoghadas.github.io/blog/2012/03/01/installing-and-configuring-puppetmaster-and-puppet-clients-on-ubuntu/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left articlenav" href="/blog/2012/02/22/how-to-install-homebrew-on-osx-lion/" title="Previous Post: How to install Homebrew on OSX Lion">&laquo; How to install Homebrew on OSX Lion</a>
      
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/03/01/installing-and-configuring-puppetmaster-and-puppet-clients-on-ubuntu/">Installing and Configuring Puppetmaster and Puppet Clients (on Ubuntu)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/02/22/how-to-install-homebrew-on-osx-lion/">How to Install Homebrew on OSX Lion</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/02/01/remote-logging-server-syslog-rsyslog/">Remote Logging Server: Syslog | Rsyslog</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/02/01/note-to-self-dont-use-scripts-on-blogger/">Note to Self: Don&#8217;t Use Scripts on Blogger!</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/02/01/347/">How to Configure and Install WordPress on Nginx + PHP-FPM</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Mike Moghadas -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
